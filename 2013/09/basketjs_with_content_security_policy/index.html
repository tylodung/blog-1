<!doctype html>
<html lang="ja" itemscope itemtype="http://schema.org/Blog">
<head>
    <meta charset="utf-8">
  <title>ãƒ¡ãƒ¢ãƒ­ã‚°</title>
  <meta name="description" content="ğŸ’¡ Personal notes about somthing I&#39;m interested in" id="meta-description">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="/blog/css/global.css">
  <script>window.lazyLoadOptions = {};</script>
<link rel="stylesheet" href="/blog/css/prism.css" type="text/css">
<link rel="stylesheet" href="/blog/css/prism-line-numbers.css" type="text/css"></head>
<body>
    <header class="header header_component_global">
    <div class="header__title header__title"><a href="/blog/">ãƒ¡ãƒ¢ãƒ­ã‚°</a></div>
    <p class="header__description">ğŸ’¡ Personal notes about somthing I&#39;m interested in</p>
    <aside><blockquote class="header__epigraph">Well, he fuffed, and he puffed, and he huffed and he puffed, and he puffed and huffed; but he could not get the house down.</blockquote></aside>
    <nav class="navigation navigation-global">
      <a href="/blog/" class="navigation__link">ğŸ“˜ Latest Articles</a>
    </nav>
  </header>
  <div class="container">
    <main class="main">
      <article itemprop="blogPost" itemscope itemType="http://schema.org/BlogPosting">
        <header class="header">
          <h1 class="header__title" itemprop="name">basket.js ã¨ Content Security Policy</h1>
          <div>
            <time datetime="2013-09-08T12:00:00.000Z" itemprop="datePublished">
              <span class="calendar-icon">ğŸ“…</span><span>2013å¹´9æœˆ8æ—¥</span>
            </time>
          </div>
          
        </header>
        <div id="article-content" class="content" itemprop="articleBody"><p><a href="/blog//2013/09/github_content_security_policy/">Github ã® Content Security Policy - ãƒ¡ãƒ¢ãƒ­ã‚°</a>ã®ç¶šãã®ã‚ˆã†ãªæ„Ÿã˜ã§ã€‚</p>
<p><a href="http://addyosmani.github.io/basket.js/" target="_blank" rel="noopener">basket.js - a simple script loader that caches scripts with localStorag</a>ã¨ã„ã†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã¯ã€requireã§æŒ‡å®šã—ãŸURLã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’localStorageã«ä¿å­˜ã—ã¦å†åˆ©ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚å¯¾è±¡ã¯ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã ã‘ã§ã™ãŒã€AppCacheã¨æ¯”ã¹ã¦1ãƒ•ã‚¡ã‚¤ãƒ«å˜ä½ã§ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®expireã‚’è¨­å®šã§ãã‚‹ã®ã§æŸ”è»Ÿã«æ‰±ãˆã‚‹ã€‚</p>
<a id="more"></a>
<p>ãŸã ã€basket.jsã¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ãƒ­ãƒ¼ãƒ‰ã™ã‚‹å ´åˆã€localStorageã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã—ãŸå†…å®¹ã‚’scriptè¦ç´ ã®textã¨ã—ã¦ä½¿ç”¨ã™ã‚‹ã®ã§ã€ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã®scriptã¨ã—ã¦æŒ¿å…¥ã™ã‚‹ã“ã¨ã«ãªã‚‹ã€‚ãã®ãŸã‚ã€Content Security Policyï¼ˆCSPï¼‰ã‚’å°å…¥ã—ã‚ˆã†ã¨ã™ã‚‹ã¨ã€script-srcã«unsafe-inlineã‚’è¨­å®šã™ã‚‹å¿…è¦ãŒå‡ºã¦ã—ã¾ã†ã€‚</p>
<p>script-srcã§ã®unsafe-inlineã®è¨±å¯ã¯ã€<a href="https://github.com/blog/1477-content-security-policy" target="_blank" rel="noopener">Content Security Policy</a>ã§è¨€ã†ã¨ã“ã‚ã®ã€last layer of defense ã¨ã—ã¦ã®CSPã®å½¹å‰²ã‚’å¤§ããæãªã£ã¦ã—ã¾ã†ã€‚innerHTMLã«å¤–éƒ¨ã‹ã‚‰å–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’æŒ¿å…¥ã™ã‚‹ã¨ã—ã¦ã€ãã®ãƒ‡ãƒ¼ã‚¿ã«æ‚ªæ„ã®ã‚ã‚‹scriptãŒå«ã¾ã‚Œã¦ã„ãŸå ´åˆã€æ‚ªæ„ã®ã‚ã‚‹ã‚³ãƒ¼ãƒ‰ãŒå®Ÿè¡Œã•ã‚Œã¦ã—ã¾ã†ã€‚ãã‚ŒãŒã§ããªã„ã‚ˆã†ã«escapeå‡¦ç†ãªã©ã—ã¦ã§ããªã„ã‚ˆã†ã«ã™ã‚‹ã‚ã‘ã§ã™ãŒã€ãã†ã„ã†ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾ç­–ãŒã™ã‚ŠæŠœã‘ã¦ã—ã¾ã£ãŸå ´åˆã§ã‚‚CSPãŒè¨­å®šã•ã‚Œã¦ã„ã‚Œã°å®Ÿè¡Œã•ã‚Œãªã„ã§çµ‚ã‚ã‚‹ã€‚ã§ã‚‚ã€unsafe-inlineã‚’æœ‰åŠ¹ã«ã—ã¦ã—ã¾ã†ã¨ã€å®Ÿè¡Œã‚’è¨±å¯ã™ã‚‹ã“ã¨ã«ãªã‚‹ã®ã§ã€last layer of defense ã¨ã—ã¦ã®æ©Ÿèƒ½ãŒåŠæ¸›ã—ã¦ã—ã¾ã†ã€‚script-srcã®unsafe-inlineã¯ã€ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³scriptãŒæ˜ç¢ºã«å®‰å…¨ã¨ã„ã†çŠ¶æ³ã§ãªã‘ã‚Œã°ã€è¨­å®šã™ã¹ãã§ãªã„ã€‚</p>
<p>ãªã®ã§ã€CSPã‚’æœ‰åŠ¹ã«æ©Ÿèƒ½ã•ã›ãŸä¸Šã§ã€basket.jsã‚’ä½¿ã†ã¨ã„ã†ã®ãŒã€é›£ã—ã„ã€‚ä¸¡ç«‹ã™ã‚‹æ–¹æ³•ãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã‘ã©ã€ä»Šã®ã¨ã“ã‚èª¿æŸ»ä¸è¶³ã‚‚ã‚ã£ã¦åˆ†ã‹ã‚‰ãªã„ã€‚</p>
<p>ã¨ã„ã†ãƒ¡ãƒ¢</p>
</div>
      </article>
    </main>
  </div>
  <script src="/blog/js/lazysizes/lazysizes.min.js" async></script>
<script type="text/javascript">
  // http://css-tricks.com/favicons-next-to-external-links/
  for (const article of document.getElementsByTagName('article')){
    for (const link of article.getElementsByTagName('a')){
      const hostname = link.hostname;
      if (hostname === location.hostname) { continue; }
      link.style.background = `url(http://www.google.com/s2/favicons?domain=${hostname}) 4px center no-repeat`;
      link.style.paddingLeft = '24px';
    }
  }
</script>
</body>
</html>