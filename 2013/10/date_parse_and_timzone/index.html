<!doctype html>
<html lang="ja" itemscope itemtype="http://schema.org/Blog">
<head>
    <meta charset="utf-8">
  <title>ãƒ¡ãƒ¢ãƒ­ã‚°</title>
  <meta name="description" content="ğŸ’¡ Personal notes about somthing I&#39;m interested in" id="meta-description">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="/blog/css/global.css">
<link rel="stylesheet" href="/blog/css/prism.css" type="text/css">
<link rel="stylesheet" href="/blog/css/prism-line-numbers.css" type="text/css"></head>
<body>
    <header class="header header_component_global">
    <div class="header__title header__title"><a href="/blog/">ãƒ¡ãƒ¢ãƒ­ã‚°</a></div>
    <p class="header__description">ğŸ’¡ Personal notes about somthing I&#39;m interested in</p>
    <aside><blockquote class="header__epigraph">Well, he fuffed, and he puffed, and he huffed and he puffed, and he puffed and huffed; but he could not get the house down.</blockquote></aside>
    <nav class="navigation navigation-global">
      <a href="/blog/" class="navigation__link">ğŸ“˜ Latest Articles</a>
    </nav>
  </header>
  <div class="container">
    <main class="main">
      <article itemprop="blogPost" itemscope itemType="http://schema.org/BlogPosting">
        <header class="header">
          <h1 class="header__title" itemprop="name">Date.parseã¨ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³</h1>
          <div>
            <time datetime="2013-10-06T00:50:00.000Z" itemprop="datePublished">
              <span class="calendar-icon">ğŸ“…</span><span>2013å¹´10æœˆ6æ—¥</span>
            </time>
          </div>
        </header>
        <div id="article-content" class="content" itemprop="articleBody"><p>Date.parse(â€˜1999-07-07â€™)ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€å€¤ã¯931305600000ã¨UTCã®ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã§è§£é‡ˆã•ã‚Œã‚‹ã®ã«å¯¾ã—ã¦ã€Date.parse(â€˜1999/07/07â€™)ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€å€¤ã¯931273200000ã¨JSTã®ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã§è§£é‡ˆã•ã‚Œã‚‹ã€‚ã‚ã€ãƒ­ãƒ¼ã‚«ãƒ«ã®æ™‚é–“ãŒJSTã®å ´åˆã€‚ç¾æ™‚ç‚¹ï¼ˆFirefox 24ã€Chrome 31ï¼‰</p>
<a id="more"></a>
<p><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Date/parse?redirectlocale=ja&amp;redirectslug=JavaScript&#x25;2FReference&#x25;2FGlobal_Objects&#x25;2FDate&#x25;2Fparse" target="_blank" rel="noopener">Date.parse</a>ã§ã¯å¼•æ•°ã«ä¸ãˆã‚‰ã‚ŒãŸæ–‡å­—åˆ—ã‚’ãƒ‘ãƒ¼ã‚¹ã—ã¦ã€ãƒŸãƒªç§’ã®å€¤ã‚’å€¤ã‚’è¿”ã—ã¦ãã‚Œã¾ã™ã€‚ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã®æŒ‡å®šãŒãªã„å ´åˆã¯ãƒ­ãƒ¼ã‚«ãƒ«ã®ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã¨ã—ã¦è§£é‡ˆã•ã‚Œã‚‹ã€‚<a href="http://www.ecma-international.org/publications/standards/Ecma-262.htm" target="_blank" rel="noopener">ECMA-262</a>ã§ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«èª¬æ˜ã•ã‚Œã¦ã„ã¾ã™ï¼ˆå¤ªå­—ã¯ç§ãŒã¤ã‘ãŸï¼‰ã€‚</p>
<blockquote>
<p>15.9.4.2 Date.parse (string)</p>
<p>The parse function applies the ToString operator to its argument and interprets the resulting String as a date and time; it returns a Number, the UTC time value corresponding to the date and time. <strong>The String may be interpreted as a local time</strong>, a UTC time, or a time in some other time zone, depending on the contents of the String.</p>
</blockquote>
<p>ã¤ã¾ã‚Šã€Date.parse(â€˜1999/07/07â€™)ã§ã¯ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã®æŒ‡å®šãŒãªã„ã®ã§ã€ãƒ­ãƒ¼ã‚«ãƒ«ã®ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã®æ—¥æ™‚ã¨ã—ã¦è§£é‡ˆã•ã‚Œã‚‹ã€‚Date.parse(â€˜1999-07-07â€™)ã®å ´åˆã¯ãªãœUTCã«ãªã‚‹ã‹ã€‚ECMA-262ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ç¶šãã€‚</p>
<blockquote>
<p><strong>The function first attempts to parse the format of the String according to the rules called out in Date Time String Format (15.9.1.15).</strong> If the String does not conform to that format the function may fall back to any implementation-specific heuristics or implementation-specific date formats. Unrecognisable Strings or dates containing illegal element values in the format String shall cause Date.parse to return NaN.</p>
</blockquote>
<p>Date Time String Formatã«ã¤ã„ã¦ã¯ã€ä¸‹è¨˜ã®ã‚ˆã†ã«æ›¸ã‹ã‚Œã¦ã„ã‚‹ã€‚</p>
<blockquote>
<p>15.9.1.15 Date Time String Format</p>
<p>ECMAScript defines a string interchange format for date-times based upon a simplification of the ISO 8601 Extended Format. The format is as follows: YYYY-MM-DDTHH:mm:ss.sssZ</p>
</blockquote>
<p>ã¤ã¾ã‚Šã€Date.parseã§æ¸¡ã•ã‚ŒãŸå¼•æ•°ã¯ã€æœ€åˆã«ISO8601ã®æ›¸å¼ã«å¾“ã£ã¦è§£é‡ˆã—ã¦ã€ISO8601ã«åˆã‚ãªã„å ´åˆã¯ãƒ–ãƒ©ã‚¦ã‚¶ã®å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹è§£é‡ˆã«å§”ã­ã‚‰ã‚Œã‚‹ã€‚</p>
<p>ãªã®ã§ã€Date.parse(â€˜1999-07-07â€™)ã®å ´åˆã¯ISO8601ã®æ›¸å¼ã¨ã—ã¦è§£é‡ˆã•ã‚Œã‚‹ï¼ˆISO8601ã®æ›¸å¼ã«ä¸€è‡´ã™ã‚‹ï¼‰ã€‚ãã—ã¦ISO8601ã®æ›¸å¼ã«ãŠã„ã¦ã¯ã€ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã®æŒ‡å®šãŒãªã„å ´åˆã¯UTCã®ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã¨ãªã‚‹ã€‚é›°å›²æ°—ã€‚</p>
<blockquote>
<p>All numbers must be base 10. If the MM or DD fields are absent 01 is used as the value. If the HH, mm, or ss fields are absent 00 is used as the value and the value of an absent sss field is 000. <strong>The value of an absent time zone offset is Z.</strong></p>
</blockquote>
<p>ã—ã‹ã—ã€<a href="http://en.wikipedia.org/wiki/ISO_8601#Time_zone_designators" target="_blank" rel="noopener">Wikipediaã®ISO8601ã®time zoneã®è¨˜è¿°</a>ã‚’èª­ã‚€ã¨ã€UTCã«é–¢é€£ã™ã‚‹æƒ…å ±ãŒãªã„å ´åˆã¯ã€æ™‚é–“ã¯ãƒ­ãƒ¼ã‚«ãƒ«ã‚¿ã‚¤ãƒ ã¨ä»®å®šã•ã‚Œã‚‹ã¨è¨˜ã•ã‚Œã¦ã„ã‚‹ã€‚</p>
<blockquote>
<p>Time zone designators</p>
<p>Time zones in ISO 8601 are represented as local time (with the location unspecified), as UTC, or as an offset from UTC.</p>
<p><strong>If no UTC relation information is given with a time representation, the time is assumed to be in local time.</strong> While it may be safe to assume local time when communicating in the same time zone, it is ambiguous when used in communicating across different time zones. It is usually preferable to indicate a time zone (zone designator) using the standardâ€™s notation.</p>
</blockquote>
<p>ã†ãƒ¼ã‚“â€¦ ã©ã£ã¡ãªã®ã‹ã€‚ç¾æ™‚ç‚¹ã®ãƒ–ãƒ©ã‚¦ã‚¶ã®å®Ÿè£…çš„ã«ã¯UTCã«ãªã‚‹ã‚ã‘ã§ã™ã‘ã©ã€‚</p>
<p>ã¨ã«ã‹ãã€‚ã¾ã‚ã€ã ã‹ã‚‰ã€Date.parseã§æ—¥æœ¬æ™‚é–“ã¨ã—ã¦è§£é‡ˆã—ãŸã„å ´åˆã¯Date.parse(â€˜1999-07-07T00:00:00+09:00â€™)ã¨ã„ã†ã‚ˆã†ã«ã€ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã‚’æ˜ç¤ºçš„ã«æŒ‡å®šã—ãŸæ–¹ãŒè‰¯ã„ã€‚Date.parse(â€˜1999/07/07â€™)ã®æ–¹ãŒã‚¹ãƒƒã‚­ãƒªã—ã¦è‰¯ã„ã®ã§ã™ã‘ã©ã€ã“ã¡ã‚‰ã¯ãƒ–ãƒ©ã‚¦ã‚¶ã®å®Ÿè£…æ¬¡ç¬¬ã§ã‚ã‚‹ã®ã§ã€è§£é‡ˆã§ããšã«NaNã«ãªã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã—ã€Future proofã¨ã„ã†è¦³ç‚¹ã‹ã‚‰ã‚‚ã‚„ã¯ã‚ŠISO8601ã§æŒ‡å®šã™ã‚‹æ–¹ãŒè‰¯ã„ï¼ˆâ€™1999/07/07â€™ã¯ã©ã®ãƒ–ãƒ©ã‚¦ã‚¶ã§ã‚‚å¤§ä¸ˆå¤«ã ã‘ã©ï¼‰ã€‚</p>
<p>ã—ã‹ã—ã€IE8ã¯ISO8601ã®æ›¸å¼ã«ã¯å¯¾å¿œã—ã¦ã„ãªã„â€¦ Date.parse(â€˜1999-07-07â€™)ã¯NaNã«ãªã‚‹ã€‚ãªã®ã§ã€åˆ¥é€”å¯¾å¿œã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚ãã®ã‚ãŸã‚Š<a href="http://momentjs.com/docs/#/parsing/string/" target="_blank" rel="noopener">Moment.js</a>ã§ã¯ã‚¯ãƒ­ã‚¹ãƒ–ãƒ©ã‚¦ã‚¶ã«å¯¾å¿œã—ã¦ã„ã‚‹ã®ã§ä¾¿åˆ©ã€‚Moment.jsã¯ãã‚Œä»¥å¤–ã«ã‚‚ã„ã‚ã„ã‚ä¾¿åˆ©ã€‚ãŸã ã€Moment.jsã§moment(â€˜1999-07-07â€™)ã¨ã™ã‚‹ã¨ã€TimezoneãŒãƒ­ãƒ¼ã‚«ãƒ«ã‚¿ã‚¤ãƒ ã«ãªã‚‹ã®ã§æ³¨æ„ã€‚ï¼ˆ<a href="https://github.com/moment/moment/issues/1167" target="_blank" rel="noopener">issue</a>ã«ã‚ã’ã¦ã¿ãŸã‘ã©ã€ä¸Šã®ISO8601ã®å†…å®¹ã‚‚ã‚ã£ã¦closeã«ãªã£ãŸã€‚ã¾ã‚ã§ã‚‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ãƒ­ãƒ¼ã‚«ãƒ«ã‚¿ã‚¤ãƒ ã®æ–¹ãŒå¦¥å½“ãªæ°—ãŒã™ã‚‹ï¼‰</p>
<p>ãã®å¾Œã€ã‚ˆã‚Šè©³ã—ã„å›ç­”ãŒã¤ã„ãŸï¼ˆä»¥ä¸‹ã¯æŠœç²‹ï¼‰ã€‚è©³ã—ãã¯<a href="https://github.com/moment/moment/issues/1167#issuecomment-25772376" target="_blank" rel="noopener">ã“ã¡ã‚‰</a>ã€‚</p>
<blockquote>
<p>In reality, browsers that support the ISO format tend to follow the ES5 rule when provided an input in YYYY-MM-DD format, as long as the separator is a hyphen (-). But if the separator is a slash (/), then they usually treat that as local time. However, I donâ€™t think it would be a good idea to have moment follow this convention.</p>
<p>One of the primary reasons for using moment (IMHO) is to have uniformity in parsing. Browser specifics and ES5 specs are not something we should aim for feature parity with. Moment is more than just a shim. One could argue that ES5 is â€œdoing it wrongâ€, and that moment implements ISO8601 more precisely. Although ES5 does make it clear that theirs is a â€œbased upon a simplification of the ISO 8601 Extended Formatâ€, so it doesnâ€™t have to precisely implement it.</p>
</blockquote>
<p>ISO8601ã¨ES5ã¨ã®specã®é•ã„ã«ã¤ã„ã¦ã€ãƒ–ãƒ©ã‚¦ã‚¶ã¯ES5ã«ã‚ˆã›ã‚‹å‚¾å‘ãŒã‚ã‚‹ã¨ã€‚ES5ã®specãŒèª¤ã£ã¦ã„ã¦ã€momentã®å®Ÿè£…ã®æ–¹ãŒISO8601ã«å¯¾ã—ã¦ã‚ˆã‚Šæ­£ç¢ºã§ã‚ã‚‹ã¨ã„ã†è¦‹æ–¹ã‚‚ã§ãã‚‹ã¨ã€‚</p>
<p>ã¾ã‚ã€ãã†ã„ã†ã‚ã‘ã§ã€ãƒ‘ãƒ¼ã‚¹ã™ã‚‹ã¨ãã«ä½¿ã†æ–‡å­—åˆ—ã¯ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã¾ã§å«ã‚ã‚‹ã®ãŒè‰¯ã—ã€‚</p>
<p>ã¨ã„ã†ãƒ¡ãƒ¢ã€‚</p>
</div>
      </article>
    </main>
  </div>
</body>
</html>