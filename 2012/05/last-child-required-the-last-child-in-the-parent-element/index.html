<!doctype html>
<html lang="ja" itemscope itemtype="http://schema.org/Blog">
<head>
    <meta charset="utf-8">
  <title>メモログ</title>
  <meta name="description" content="💡 Personal notes about somthing I&#39;m interested in" id="meta-description">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="/blog/css/global.css">
<link rel="stylesheet" href="/blog/css/prism.css" type="text/css">
<link rel="stylesheet" href="/blog/css/prism-line-numbers.css" type="text/css"></head>
<body>
    <header class="header header_component_global">
    <div class="header__title header__title"><a href="/blog/">メモログ</a></div>
    <p class="header__description">💡 Personal notes about somthing I&#39;m interested in</p>
    <aside><blockquote class="header__epigraph">Well, he fuffed, and he puffed, and he huffed and he puffed, and he puffed and huffed; but he could not get the house down.</blockquote></aside>
    <nav class="navigation navigation-global">
      <a href="/blog/" class="navigation__link">📘 Latest Articles</a>
    </nav>
  </header>
  <div class="container">
    <main class="main">
      <article itemprop="blogPost" itemscope itemType="http://schema.org/BlogPosting">
        <header class="header">
          <h1 class="header__title" itemprop="name">は親要素からみて最後の子要素</h1>
          <div>
            <time datetime="2012-05-24T06:00:00.000Z" itemprop="datePublished">
              <span class="calendar-icon">📅</span><span>2012年5月24日</span>
            </time>
          </div>
        </header>
        <div id="article-content" class="content" itemprop="articleBody"><p>（そのままではないか）</p>
<p>たとえば以下のようなHTMLがあるとして、</p>
  <div class="entries"><br>    <article>foo</article><br>    <article>bar</article><br><br><a id="more"></a><br>    <article>baz</article><br>    <article>qux</article><br>    <ul><br>      <li><a href="#">next</a></li><br>    </ul><br>  </div>

<p>article要素の最後の子要素に枠線を入れたいとして、下記のようにCSSを入れるとする。でもこれだとうまくいかない。どこにもborderはつかないことになる。</p>
<p>article:last-child{ border:1px solid #ddd; }</p>
<p>仕様を参照すると、下記のように書かれている（:last-childは:nth-last-child(1)と同義なので、そちらの仕様）。</p>
<blockquote>
<h4 id="6-6-5-3-nth-last-child-pseudo-class"><a href="#6-6-5-3-nth-last-child-pseudo-class" class="headerlink" title="6.6.5.3. :nth-last-child() pseudo-class"></a>6.6.5.3. :nth-last-child() pseudo-class</h4><p>The :nth-last-child(an+b) pseudo-class notation represents an element that has <strong>an+b-1 siblings after it</strong> in the document tree …</p>
<p><a href="http://www.w3.org/TR/selectors/#nth-last-child-pseudo" target="_blank" rel="noopener">http://www.w3.org/TR/selectors/#nth-last-child-pseudo</a></p>
</blockquote>
<p>:nth-last-child(an+b)では、an+b-1個の兄弟ノード(siblings)が後ろに存在する要素が対象になる。article:last-childの指定は「article要素の最後の要素」という意味ではなく、「兄弟ノードが後ろにない要素（親要素の最後の子要素）で、かつarticle要素」というような意味になる。articleのlast-childではなくて、last-childのarticle。</p>
<p>上の例の場合では、div.entriesの最後にul要素が入っていて、これが「兄弟ノードが後ろにない要素」になる。しかしarticle要素ではないので、CSSの宣言の対象にならない。</p>
<p>この場合、article:nth-last-child(2)というかたちで指定するか、下記のようにHTMLの構造を変更する。</p>
<p>  <div class="entries"><br>    <article>foo</article><br>    <article>bar</article><br>    <article>baz</article><br>    <article>qux</article><br>  </div><br>  <ul><br>    <li><a href="#">next</a></li><br>  </ul></p>
<p>（追記）HTMLを返る必要はなく、article:last-type-of を使用すればいい。</p>
</div>
      </article>
    </main>
  </div>
</body>
</html>