<!doctype html>
<html lang="ja" itemscope itemtype="http://schema.org/Blog">
<head>
    <meta charset="utf-8">
  <title>メモログ</title>
  <meta name="description" content="💡 Personal notes about somthing I&#39;m interested in" id="meta-description">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="/blog/css/global.css">
  <script>window.lazyLoadOptions = {};</script>
<link rel="stylesheet" href="/blog/css/prism.css" type="text/css">
<link rel="stylesheet" href="/blog/css/prism-line-numbers.css" type="text/css"></head>
<body>
    <header class="header header_component_global">
    <div class="header__title header__title"><a href="/blog/">メモログ</a></div>
    <p class="header__description">💡 Personal notes about somthing I&#39;m interested in</p>
    <aside><blockquote class="header__epigraph">Well, he fuffed, and he puffed, and he huffed and he puffed, and he puffed and huffed; but he could not get the house down.</blockquote></aside>
    <nav class="navigation navigation-global">
      <a href="/blog/" class="navigation__link">📘 Latest Articles</a>
    </nav>
  </header>
  <div class="container">
    <main class="main">
      
        <article class="article-summary" itemprop="blogPost" itemscope itemType="http://schema.org/BlogPosting">
          <header class="header">
            <h1 class="header__title" itemprop="name"><a href="/blog/2012/05/b_element/">b要素について</a></h1>
            <div><time datetime="2012-05-30T06:00:00.000Z" itemprop="datePublished"><span class="calendar-icon">📅</span><span>2012年5月30日</span></time></div>
                        
          </header>
          
            <div class="content" itemprop="description"><p>HTML5になってb要素の定義が変更されている。4.01のときの仕様は<a href="http://www.w3.org/TR/1999/REC-html401-19991224/present/graphics.html#edef-B" target="_blank" rel="noopener">Alignment, font styles, and horizontal rules in HTML documents</a>に書かれていて、太字でスタイリングされることが書かれている（強調表示みたいな含意がある..ように思ってたけど、覚えてない）。HTML5での定義は<a href="http://www.w3.org/TR/html5-diff/#changed-elements" target="_blank" rel="noopener">HTML5 differences from HTML4</a>や<a href="http://www.w3.org/TR/html5/the-b-element.html#the-b-element" target="_blank" rel="noopener">4.6.17 The b element — HTML5</a>で、下記のように書かれている。</p></div>
            <div><a href="/blog/2012/05/b_element/" itemprop="url">📖 続きを読む</a></div>
          
        </article>
      
        <article class="article-summary" itemprop="blogPost" itemscope itemType="http://schema.org/BlogPosting">
          <header class="header">
            <h1 class="header__title" itemprop="name"><a href="/blog/2012/05/invited_elements/">独自要素を作成する</a></h1>
            <div><time datetime="2012-05-29T06:00:00.000Z" itemprop="datePublished"><span class="calendar-icon">📅</span><span>2012年5月29日</span></time></div>
                        
          </header>
          
            <div class="content" itemprop="description"><p>少し前に<a href="http://meyerweb.com/eric/thoughts/2012/03/23/invented-elements/" target="_blank" rel="noopener">Eric’s Archived Thoughts:Invented Elements</a>、<a href="http://meyerweb.com/eric/thoughts/2012/03/28/customizing-your-markup/" target="_blank" rel="noopener">Eric’s Archived Thoughts:Customizing Your Markup</a>、<a href="http://meyerweb.com/eric/thoughts/2012/04/10/element-customization/" target="_blank" rel="noopener">Eric’s Archived Thoughts:Element Customization</a>で解説されていた話。</p></div>
            <div><a href="/blog/2012/05/invited_elements/" itemprop="url">📖 続きを読む</a></div>
          
        </article>
      
        <article class="article-summary" itemprop="blogPost" itemscope itemType="http://schema.org/BlogPosting">
          <header class="header">
            <h1 class="header__title" itemprop="name"><a href="/blog/2012/05/favicons_next_to_external_link/">リンクの隣りにfaviconを表示する</a></h1>
            <div><time datetime="2012-05-28T06:00:00.000Z" itemprop="datePublished"><span class="calendar-icon">📅</span><span>2012年5月28日</span></time></div>
                        
          </header>
          
            <div class="content" itemprop="description"><p><a href="http://css-tricks.com/favicons-next-to-external-links/" target="_blank" rel="noopener">Favicons Next To External Links | CSS-Tricks</a>という、リンクの左側にリンク先のfaviconを表示するというテクニックが紹介されていて、試してみました。簡単にできて、見た目にも華やかになるので面白い（個人的に）。</p></div>
            <div><a href="/blog/2012/05/favicons_next_to_external_link/" itemprop="url">📖 続きを読む</a></div>
          
        </article>
      
        <article class="article-summary" itemprop="blogPost" itemscope itemType="http://schema.org/BlogPosting">
          <header class="header">
            <h1 class="header__title" itemprop="name"><a href="/blog/2012/05/css_selector_performance/">CSS Selector Performance</a></h1>
            <div><time datetime="2012-05-27T06:00:00.000Z" itemprop="datePublished"><span class="calendar-icon">📅</span><span>2012年5月27日</span></time></div>
                        
          </header>
          
            <div class="content" itemprop="description"><p><a href="http://calendar.perfplanet.com/2011/css-selector-performance-has-changed-for-the-better/" target="_blank" rel="noopener">Performance Calendar » CSS Selector Performance has changed! (For the better)</a>にWebkitでCSSのマッチングの最適化が進んでいるという話が掲載されていて、下記の4つ最適化方法について紹介しています（via <a href="http://paulirish.com/2012/box-sizing-border-box-ftw/" target="_blank" rel="noopener">* { box-sizing: border-box } FTW « Paul Irish</a>）。という話の紹介。</p></div>
            <div><a href="/blog/2012/05/css_selector_performance/" itemprop="url">📖 続きを読む</a></div>
          
        </article>
      
        <article class="article-summary" itemprop="blogPost" itemscope itemType="http://schema.org/BlogPosting">
          <header class="header">
            <h1 class="header__title" itemprop="name"><a href="/blog/2012/05/aria-hidden/">aria-hiddenについて</a></h1>
            <div><time datetime="2012-05-26T06:48:00.000Z" itemprop="datePublished"><span class="calendar-icon">📅</span><span>2012年5月26日</span></time></div>
                        
          </header>
          
            <div class="content" itemprop="description"><p><a href="http://css-tricks.com/html-for-icon-font-usage/" target="_blank" rel="noopener">HTML for Icon Font Usage | CSS-Tricks</a>でアイコン用フォントを使用して、対象の左側にアイコン画像を表示するという方法が紹介されているのですが、その中でスクリーンリーダー対策として「aria-hidden」という属性を入れている。</p></div>
            <div><a href="/blog/2012/05/aria-hidden/" itemprop="url">📖 続きを読む</a></div>
          
        </article>
      
        <article class="article-summary" itemprop="blogPost" itemscope itemType="http://schema.org/BlogPosting">
          <header class="header">
            <h1 class="header__title" itemprop="name"><a href="/blog/2012/05/sublime_text_2_zen_coding/">Sublime Text 2 で Zen Coding (Emmet)</a></h1>
            <div><time datetime="2012-05-25T07:52:13.000Z" itemprop="datePublished"><span class="calendar-icon">📅</span><span>2012年5月25日</span></time></div>
                        
          </header>
          
            <div class="content" itemprop="description"><p>（追記 2013/1/30）Packageの名前がZen Codingから「<a href="https://github.com/sergeche/emmet-sublime" target="_blank" rel="noopener">Emmet</a>」に変わっていました。ので、Packageの名前をEmmetに差し替えました。あわせて最後に書いていたスニペットの変更方法もちゃんとした（？）方法に書き換えました。</p></div>
            <div><a href="/blog/2012/05/sublime_text_2_zen_coding/" itemprop="url">📖 続きを読む</a></div>
          
        </article>
      
        <article class="article-summary" itemprop="blogPost" itemscope itemType="http://schema.org/BlogPosting">
          <header class="header">
            <h1 class="header__title" itemprop="name"><a href="/blog/2012/05/last-child-required-the-last-child-in-the-parent-element/">は親要素からみて最後の子要素</a></h1>
            <div><time datetime="2012-05-24T06:00:00.000Z" itemprop="datePublished"><span class="calendar-icon">📅</span><span>2012年5月24日</span></time></div>
                        
          </header>
          
            <div class="content" itemprop="articleBody"><p>（そのままではないか）</p>
<p>たとえば以下のようなHTMLがあるとして、</p>
<pre><code>  &lt;div class=&quot;entries&quot;&gt;
    &lt;article&gt;foo&lt;/article&gt;
    &lt;article&gt;bar&lt;/article&gt;

&lt;!-- more --&gt;
    &lt;article&gt;baz&lt;/article&gt;
    &lt;article&gt;qux&lt;/article&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#&quot;&gt;next&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/div&gt;
</code></pre><p>article要素の最後の子要素に枠線を入れたいとして、下記のようにCSSを入れるとする。でもこれだとうまくいかない。どこにもborderはつかないことになる。</p>
<pre><code>article:last-child{ border:1px solid #ddd; }
</code></pre><p>仕様を参照すると、下記のように書かれている（:last-childは:nth-last-child(1)と同義なので、そちらの仕様）。</p>
<blockquote>
<h4 id="6-6-5-3-nth-last-child-pseudo-class"><a href="#6-6-5-3-nth-last-child-pseudo-class" class="headerlink" title="6.6.5.3. :nth-last-child() pseudo-class"></a>6.6.5.3. :nth-last-child() pseudo-class</h4><p>The :nth-last-child(an+b) pseudo-class notation represents an element that has <strong>an+b-1 siblings after it</strong> in the document tree …</p>
<p><a href="http://www.w3.org/TR/selectors/#nth-last-child-pseudo" target="_blank" rel="noopener">http://www.w3.org/TR/selectors/#nth-last-child-pseudo</a></p>
</blockquote>
<p>:nth-last-child(an+b)では、an+b-1個の兄弟ノード(siblings)が後ろに存在する要素が対象になる。article:last-childの指定は「article要素の最後の要素」という意味ではなく、「兄弟ノードが後ろにない要素（親要素の最後の子要素）で、かつarticle要素」というような意味になる。articleのlast-childではなくて、last-childのarticle。</p>
<p>上の例の場合では、div.entriesの最後にul要素が入っていて、これが「兄弟ノードが後ろにない要素」になる。しかしarticle要素ではないので、CSSの宣言の対象にならない。</p>
<p>この場合、article:nth-last-child(2)というかたちで指定するか、下記のようにHTMLの構造を変更する。</p>
<pre><code>  &lt;div class=&quot;entries&quot;&gt;
    &lt;article&gt;foo&lt;/article&gt;
    &lt;article&gt;bar&lt;/article&gt;
    &lt;article&gt;baz&lt;/article&gt;
    &lt;article&gt;qux&lt;/article&gt;
  &lt;/div&gt;
  &lt;ul&gt;
    &lt;li&gt;&lt;a href=&quot;#&quot;&gt;next&lt;/a&gt;&lt;/li&gt;
  &lt;/ul&gt;
</code></pre><p>（追記）HTMLを返る必要はなく、article:last-type-of を使用すればいい。</p>
</div>
          
        </article>
      
        <article class="article-summary" itemprop="blogPost" itemscope itemType="http://schema.org/BlogPosting">
          <header class="header">
            <h1 class="header__title" itemprop="name"><a href="/blog/2012/05/float_and_width_auto/">floatとwidth&#x3a;auto</a></h1>
            <div><time datetime="2012-05-23T06:41:00.000Z" itemprop="datePublished"><span class="calendar-icon">📅</span><span>2012年5月23日</span></time></div>
                        
          </header>
          
            <div class="content" itemprop="articleBody"><p>いまさらながらのfloatとwidth:autoの話。たとえば</p>
<pre><code>&lt;div class=&quot;container&quot;&gt;
  &lt;div class=&quot;sidebar1&quot;&gt;サイドバー&lt;/div&gt;
  &lt;div class=&quot;main&quot;&gt;超長い文章のつもり&lt;/div&gt;

&lt;!-- more --&gt;
  &lt;div class=&quot;sidebar2&quot;&gt;サイドバー&lt;/div&gt;
  &lt;div class=&quot;footer&quot;&gt;フッター&lt;/div&gt;
&lt;/div&gt;
</code></pre><p>というdivがあって、.sidebar1と.sidebar2を固定値のwidthにしてfloatして、.mainのwidthはautoにして可変にしたい…ということで、下記のようにCSSを設定してもうまくいかない。</p>
<pre><code>.container{ width:auto; }
.sidebar1{ float:left; width: 200px; }
.main{ float:left; width:auto; }
.sidebar2{ float:right; width: 200px; }
</code></pre><p>width:autoは通常は包含ブロックの幅にフィットするような感じに計算されるけれど、 floatが設定されている要素の場合、<a href="http://www.w3.org/TR/CSS2/visudet.html#float-width" target="_blank" rel="noopener">10.3.5 Floating, non-replaced elements</a>の仕様に従うようになる。</p>
<blockquote>
<h3 id="10-3-5-Floating-non-replaced-elements"><a href="#10-3-5-Floating-non-replaced-elements" class="headerlink" title="10.3.5 Floating, non-replaced elements"></a>10.3.5 Floating, non-replaced elements</h3><p>If ‘margin-left’, or ‘margin-right’ are computed as ‘auto’, their used value is ‘0’.</p>
<p>If ‘width’ is computed as ‘auto’, the used value is the “shrink-to-fit” width.</p>
<p>Calculation of the shrink-to-fit width is similar to calculating the width of a table cell using the automatic table layout algorithm. Roughly: calculate the preferred width by formatting the content without breaking lines other than where explicit line breaks occur, and also calculate the preferred minimum width, e.g., by trying all possible line breaks. CSS 2.1 does not define the exact algorithm. Thirdly, find the available width: in this case, this is the width of the containing block minus the used values of ‘margin-left’, ‘border-left-width’, ‘padding-left’, ‘padding-right’, ‘border-right-width’, ‘margin-right’, and the widths of any relevant scroll bars.</p>
<p>Then the shrink-to-fit width is: min(max(preferred minimum width, available width), preferred width).</p>
</blockquote>
<p>まず、preferred widthという最大値と最小値が計算される。これは（明示的に改行を発生するところを除いて）改行しないで伸ばしたときの幅が最大幅で、改行できるところで全部改行したときに得られる幅が最小値になる（CSS 2.1では正確なアルゴリズムは定義されていない）。さらにavailable widthが求められる。これはこの場合は包含ブロックからmarginとか諸々の幅を差し引いた、利用できる正味の幅になる。</p>
<p>それで、「preferred widthの最小幅」と「available width」のどちらか大きい方の幅と、「preferred widthの最大幅」を比較して、小さい方の幅をwidthの値として使用する。</p>
<p>なので、超長い文章の場合（available widthの方が小さくなる）ので、包含ブロックの幅一杯に.mainが広がることになる。</p>
<p>上の例のような構成で3列にしたい場合は</p>
<pre><code>&lt;div class=&quot;container&quot;&gt;
  &lt;div class=&quot;sidebar1&quot;&gt;サイドバー&lt;/div&gt;
  &lt;div class=&quot;sidebar2&quot;&gt;サイドバー&lt;/div&gt;
  &lt;div class=&quot;main&quot;&gt;超長い文章のつもり&lt;/div&gt;
  &lt;div class=&quot;footer&quot;&gt;フッター&lt;/div&gt;
&lt;/div&gt;
</code></pre><pre><code>.container{ width:auto; }
.sidebar1{ float:left; width: 200px; }
.sidebar2{ float:right; width: 200px; }
.main{ width:auto; overflow:hidden; }
</code></pre><p>のように、.mainを.sidebar2の下にして、floatを外すとうまくいく。ただ、そのままだとサイドバーの下にテキストが回り込んでしまうので、overflow:hiddenを追加しておく。これはfloatと同様に <a href="http://www.w3.org/TR/CSS2/visuren.html#block-formatting" target="_blank" rel="noopener">Block formatting contexts</a>の原理が働くようにするため。</p>
<blockquote>
<h3 id="9-4-1-Block-formatting-contexts"><a href="#9-4-1-Block-formatting-contexts" class="headerlink" title="9.4.1 Block formatting contexts"></a>9.4.1 Block formatting contexts</h3><p>Floats, absolutely positioned elements, block containers (such as inline-blocks, table-cells, and table-captions) that are not block boxes, and block boxes with ‘overflow’ other than ‘visible’ (except when that value has been propagated to the viewport) establish new block formatting contexts for their contents.</p>
<p>In a block formatting context, boxes are laid out one after the other, vertically, beginning at the top of a containing block. The vertical distance between two sibling boxes is determined by the ‘margin’ properties. Vertical margins between adjacent block-level boxes in a block formatting context collapse.</p>
<p>In a block formatting context, each box’s left outer edge touches the left edge of the containing block (for right-to-left formatting, right edges touch). This is true even in the presence of floats (although a box’s line boxes may shrink due to the floats), unless the box establishes a new block formatting context (in which case the box itself may become narrower due to the floats).</p>
<p>For information about page breaks in paged media, please consult the section on allowed page breaks.</p>
<p>…</p>
<h2 id="9-5-Floats"><a href="#9-5-Floats" class="headerlink" title="9.5 Floats"></a>9.5 Floats</h2><p>…</p>
<p>The border box of a table, a block-level replaced element, or an element in the normal flow that establishes a new block formatting context (such as an element with ‘overflow’ other than ‘visible’) must not overlap the margin box of any floats in the same block formatting context as the element itself. If necessary, implementations should clear the said element by placing it below any preceding floats, but may place it adjacent to such floats if there is sufficient space. They may even make the border box of said element narrower than defined by section 10.3.3. CSS2 does not define when a UA may put said element next to the float or by how much said element may become narrower.</p>
</blockquote>
<p>overflowで「visible」以外ではblock formatting contextsが新規に設定される。block formatting contextが設定された要素はその要素自身と同じblock formatting contextにあるfloatのマージンボックスと重なってはいけないということになっている（CSS2では要素がfloatの隣に配置されるタイミングやどこまで幅を狭くできるかについての定義はない）。そのため、float同士が（隣に十分なスペースがあれば）隣り合うように、floatとoverflow:hiddenも下に回りこまないように隣り合わせることができる。</p>
</div>
          
        </article>
      
        <article class="article-summary" itemprop="blogPost" itemscope itemType="http://schema.org/BlogPosting">
          <header class="header">
            <h1 class="header__title" itemprop="name"><a href="/blog/2012/05/responsive_grid_box-sizing/">responsive grid と box-sizing</a></h1>
            <div><time datetime="2012-05-21T06:25:46.000Z" itemprop="datePublished"><span class="calendar-icon">📅</span><span>2012年5月21日</span></time></div>
                        
          </header>
          
            <div class="content" itemprop="description"><p><a href="http://www.netmagazine.com/tutorials/building-modern-grid-system" target="_blank" rel="noopener">Building a modern grid system | Tutorial | .net magazine</a>にwidthをパーセントで指定したresponsiveなgrid（で、かつネストできてサイズの変更が簡単で..云々）を作成するという話が掲載されている。</p></div>
            <div><a href="/blog/2012/05/responsive_grid_box-sizing/" itemprop="url">📖 続きを読む</a></div>
          
        </article>
      
        <article class="article-summary" itemprop="blogPost" itemscope itemType="http://schema.org/BlogPosting">
          <header class="header">
            <h1 class="header__title" itemprop="name"><a href="/blog/2012/04/install_watir-webdriver_to_windows_xp/">Windows XPにwatir-webdriverをインストールする</a></h1>
            <div><time datetime="2012-04-12T04:38:21.000Z" itemprop="datePublished"><span class="calendar-icon">📅</span><span>2012年4月12日</span></time></div>
                        
          </header>
          
            <div class="content" itemprop="description"><p>gem installするだけで簡単だろうと思って始めてみたら意外と面倒だったのでメモ。Rubyは<a href="http://rubyinstaller.org/downloads" target="_blank" rel="noopener">RubyInstallerのDownloadページ</a>から「Ruby 1.8.7-p358」をダウンロードしてインストールしました。</p></div>
            <div><a href="/blog/2012/04/install_watir-webdriver_to_windows_xp/" itemprop="url">📖 続きを読む</a></div>
          
        </article>
      
    </main>
  </div>
  <script src="/blog/js/lazysizes/lazysizes.min.js" async></script>
<script type="text/javascript">
  // http://css-tricks.com/favicons-next-to-external-links/
  for (const article of document.getElementsByTagName('article')){
    for (const link of article.getElementsByTagName('a')){
      const hostname = link.hostname;
      if (hostname === location.hostname) { continue; }
      link.style.background = `url(http://www.google.com/s2/favicons?domain=${hostname}) 4px center no-repeat`;
      link.style.paddingLeft = '24px';
    }
  }
</script>
</body>
</html>