<h1 id="lazysizes-bgset-extension-responsive-background-images"><a href="#lazysizes-bgset-extension-responsive-background-images" class="headerlink" title="lazysizes bgset extension - responsive background images"></a>lazysizes bgset extension - responsive background images</h1><p>This simple and small plugin allows you to define multiple background images with a width descriptor, similar to how <code>img[srcset]</code> works as also art directed images using media queries, similar to how <code>picture</code> works.</p>
<p>The extension will then load the best image size for the current viewport and device. In case the browser does not support responsive images natively either picturefill or the <a href="../respimg">respimg polyfill plugin</a> has to be used:</p>
<pre><code class="html"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span>
<span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">loadJS</span>(<span class="params">u</span>)</span>{<span class="keyword">var</span> r=<span class="built_in">document</span>.getElementsByTagName(<span class="string">"script"</span>)[<span class="number">0</span>],s=<span class="built_in">document</span>.createElement(<span class="string">"script"</span>);s.src=u;r.parentNode.insertBefore(s,r);}</span>
<span class="undefined"></span>
<span class="javascript">    <span class="keyword">if</span>(!<span class="built_in">window</span>.HTMLPictureElement || !(<span class="string">'sizes'</span> <span class="keyword">in</span> <span class="built_in">document</span>.createElement(<span class="string">'img'</span>))){</span>
<span class="javascript">        loadJS(<span class="string">"ls.respimg.min.js"</span>);</span>
<span class="undefined">    }</span>
<span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>

<span class="comment">&lt;!--  your stylesheets --&gt;</span>

<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"ls.bgset.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>
<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"lazysizes.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>

<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"lazyload"</span> <span class="attr">data-bgset</span>=<span class="string">"image-200.jpg 200w, image-300.jpg 300w, image-400.jpg 400w"</span> <span class="attr">data-sizes</span>=<span class="string">"auto"</span>&gt;</span>

<span class="tag">&lt;/<span class="name">div</span>&gt;</span>
</code></pre>
<p>The bgset also supports art direction through multiple media query sets. To use this feature each set has to be separated using the <code>&quot; | &quot;</code> signs and the media query has to be added at the end of the set inside of square brackets.</p>
<p>Also the <code>customMedia</code> option can be used to separate the media queries implementation from the markup.</p>
<pre><code class="html"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span>
<span class="javascript"><span class="built_in">window</span>.lazySizesConfig = <span class="built_in">window</span>.lazySizesConfig || {};</span>
<span class="javascript"><span class="built_in">window</span>.lazySizesConfig.customMedia = {</span>
<span class="javascript">    <span class="string">'--small'</span>: <span class="string">'(max-width: 480px)'</span>,</span>
<span class="javascript">    <span class="string">'--medium'</span>: <span class="string">'(max-width: 700px)'</span></span>
<span class="undefined">};</span>
<span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>

<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"lazyload"</span> <span class="attr">data-bgset</span>=<span class="string">"image-200.jpg [--small] | image-300.jpg [--medium] | image-400.jpg"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span>
<span class="comment">&lt;!-- or without customMedia options: --&gt;</span>
<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"lazyload"</span> <span class="attr">data-bgset</span>=<span class="string">"image-200.jpg [(max-width: 480px)] | image-300.jpg [(max-width: 700px)] | image-400.jpg"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span>
</code></pre>
<p>Of course also resolution switching and art direction can be combined:</p>
<pre><code class="html"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"lazyload"</span> <span class="attr">data-bgset</span>=<span class="string">"image1-200.jpg 200w, image2-400.jpg 400w [(max-width: 480px)] |</span></span>
<span class="tag"><span class="string">    image2-300.jpg 300w, image2-600.jpg 600w [(max-width: 700px)] |</span></span>
<span class="tag"><span class="string">    image-400.jpg 400w, image-800.jpg 800w"</span> <span class="attr">data-sizes</span>=<span class="string">"auto"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span>
</code></pre>
<p>Here you find a <a href="http://jsfiddle.net/trixta/bfqqnosp/embedded/result/">small bgset demo</a>.</p>
<p><strong>Note: In case you use this plugin with <code>background-size: cover|contain</code> and the <code>data-sizes=&quot;auto&quot;</code> feature, we recommend to also use the <a href="../parent-fit/">parent-fit extension</a> to calculate the right <code>sizes</code> attribute for you. See also the following <a href="http://jsfiddle.net/trixta/w96o9xm5/">demo</a>. Also have a look into the <a href="../object-fit">object-fit polyfill plugin</a>.</strong></p>
